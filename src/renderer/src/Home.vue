<template>
	<div class="index">
		<img id="end" src="../src/assets/end.png" alt="" />
		<div class="left">
			<div class="icon">
				<img src="./assets/icon.png" alt="" />
				<p class="apptitle">
					{{ apptitle }}
				</p>
			</div>
			<div class="nav">
				<p class="title">{{ tagList[0].title }}</p>
				<tag :title="i.title" :icon="i.icon" v-for="i in tagList[0].data" v-bind:key="i"></tag>
				<p class="title">在线音乐</p>
				<tag :title="i.title" :icon="i.icon" v-for="i in tagList[0].data" v-bind:key="i"></tag>
			</div>
		</div>
		<div class="right">
			<div class="titleBar">

				<div class="return">
					<svg t="1701170637427" @click="$router.go(-1)" class="end" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="7047" width="25" height="25">
						<path
							d="M624.788992 204.047974 585.205965 164.464026 219.560038 530.185011 585.205965 895.864013 624.788992 856.280986 298.663014 530.16105Z"
							p-id="7048" fill="#8a8a8a"></path>
					</svg>
					<svg t="1701170637427" @click="$router.go(1)" class="next" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="7047" width="25" height="25">
						<path
							d="M624.788992 204.047974 585.205965 164.464026 219.560038 530.185011 585.205965 895.864013 624.788992 856.280986 298.663014 530.16105Z"
							p-id="7048" fill="#8a8a8a"></path>
					</svg>
				</div>
				<div class="search">
					<input type="text" placeholder="搜索音乐" />
					<svg t="1700459104253" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="3282" width="20" height="20">
						<path
							d="M490.666667 810.666667C315.733333 810.666667 170.666667 665.6 170.666667 490.666667S315.733333 170.666667 490.666667 170.666667 810.666667 315.733333 810.666667 490.666667 665.6 810.666667 490.666667 810.666667z m0-42.666667c153.6 0 277.333333-123.733333 277.333333-277.333333S644.266667 213.333333 490.666667 213.333333 213.333333 337.066667 213.333333 490.666667 337.066667 768 490.666667 768z m264.533333-42.666667l119.466667 119.466667-29.866667 29.866667-119.466667-119.466667 29.866667-29.866667z"
							fill="#707070" p-id="3283"></path>
					</svg>
				</div>
			</div>
			<div class="main">
				<router-view v-slot="{ Component }">
					<keep-alive>
						<component ref="Main" :is="Component"></component>
					</keep-alive>
				</router-view>
			</div>
		</div>
	</div>
	<!-- <MusicStatusBar id="bottom"></MusicStatusBar> -->
	<!-- <router-view id="router"></router-view> -->
</template>
<script>
import tag from './views/tag.vue'
import home from './views/Home.vue'
import Play from './views/Play.vue'
import MusicStatusBar from './views/MusicStatusBar.vue' //播放条
// import { Music } from './modules/music'
import router from './router/index'
// router.push({
// 	path: "/home/index",
// })
// const music = new Music(new Audio())
export default {
	name: 'app',
	components: {
		tag,
		home,
		MusicStatusBar,
		Play
	},
	setup() {

	},
	activated() {
		console.log(this.$route)
		if (!this.$route.meta.keepAlive) {
			// 如果该页面不需要缓存，则在页面激活时销毁缓存
			console.log(this.$destroy())
		}
	},
	data() {
		return {
			apptitle: '轻松music',
			tagList: [
				{
					title: '在线音乐',
					data: [
						{
							title: '推荐',
							icon: `
											<path
												d="M512-0.001386c-282.770191 0-512.001386 229.231196-512.001386 512.001386S229.229809 1024.001386 512 1024.001386 1024.001386 794.770191 1024.001386 512 794.770191-0.001386 512-0.001386zM757.737262 575.556326 533.240901 792.734835c-6.097747 6.097747-14.530329 9.537608-23.402426 9.537608-8.876256 0-17.195147-3.438475-23.516118-9.6513L262.043674 575.556326C230.544194 544.386828 213.240901 503.016984 213.240901 458.870017c0-44.145581 17.303293-85.518198 48.694627-116.686308 31.276256-30.833969 72.762565-47.915425 116.908146-47.915425C420.324437 294.268284 460.148354 309.573657 490.980936 337.303293l18.857539 16.967764L528.805546 337.303293c30.724437-27.729636 70.542808-43.035009 112.029116-43.035009 44.145581 0 85.626343 16.967764 116.9026 47.915425 31.505026 31.168111 48.808319 72.654419 48.694627 116.686308C806.431889 503.016984 789.128596 544.50052 757.737262 575.556326z"
												fill="#333333" p-id="2156"></path>
											<path
												d="M376.959445 365.141075C362.42773 363.478683 333.143847 368.802773 311.511958 390.433276c-17.411438 17.412825-28.059619 42.591334-28.389601 67.439861-0.221837 7.094627 5.545927 12.976083 12.640555 13.084229l0.221837 0c6.986482 0 12.754246-5.654073 12.97747-12.754246C309.184055 439.902946 317.057886 421.380936 329.819064 408.625303c15.413518-15.419064 36.708492-18.743847 44.144194-17.860659 6.986482 0.779203 13.529289-4.213518 14.309879-11.315078C389.046794 372.354939 384.054073 365.921664 376.959445 365.141075z"
												fill="#333333" p-id="2157"></path>
						`
						},
						{
							title: '推荐',
							icon: `
											<path
												d="M512-0.001386c-282.770191 0-512.001386 229.231196-512.001386 512.001386S229.229809 1024.001386 512 1024.001386 1024.001386 794.770191 1024.001386 512 794.770191-0.001386 512-0.001386zM757.737262 575.556326 533.240901 792.734835c-6.097747 6.097747-14.530329 9.537608-23.402426 9.537608-8.876256 0-17.195147-3.438475-23.516118-9.6513L262.043674 575.556326C230.544194 544.386828 213.240901 503.016984 213.240901 458.870017c0-44.145581 17.303293-85.518198 48.694627-116.686308 31.276256-30.833969 72.762565-47.915425 116.908146-47.915425C420.324437 294.268284 460.148354 309.573657 490.980936 337.303293l18.857539 16.967764L528.805546 337.303293c30.724437-27.729636 70.542808-43.035009 112.029116-43.035009 44.145581 0 85.626343 16.967764 116.9026 47.915425 31.505026 31.168111 48.808319 72.654419 48.694627 116.686308C806.431889 503.016984 789.128596 544.50052 757.737262 575.556326z"
												fill="#333333" p-id="2156"></path>
											<path
												d="M376.959445 365.141075C362.42773 363.478683 333.143847 368.802773 311.511958 390.433276c-17.411438 17.412825-28.059619 42.591334-28.389601 67.439861-0.221837 7.094627 5.545927 12.976083 12.640555 13.084229l0.221837 0c6.986482 0 12.754246-5.654073 12.97747-12.754246C309.184055 439.902946 317.057886 421.380936 329.819064 408.625303c15.413518-15.419064 36.708492-18.743847 44.144194-17.860659 6.986482 0.779203 13.529289-4.213518 14.309879-11.315078C389.046794 372.354939 384.054073 365.921664 376.959445 365.141075z"
												fill="#333333" p-id="2157"></path>
							`
						},
						{
							title: '推荐',
							icon: `
											<path
												d="M512-0.001386c-282.770191 0-512.001386 229.231196-512.001386 512.001386S229.229809 1024.001386 512 1024.001386 1024.001386 794.770191 1024.001386 512 794.770191-0.001386 512-0.001386zM757.737262 575.556326 533.240901 792.734835c-6.097747 6.097747-14.530329 9.537608-23.402426 9.537608-8.876256 0-17.195147-3.438475-23.516118-9.6513L262.043674 575.556326C230.544194 544.386828 213.240901 503.016984 213.240901 458.870017c0-44.145581 17.303293-85.518198 48.694627-116.686308 31.276256-30.833969 72.762565-47.915425 116.908146-47.915425C420.324437 294.268284 460.148354 309.573657 490.980936 337.303293l18.857539 16.967764L528.805546 337.303293c30.724437-27.729636 70.542808-43.035009 112.029116-43.035009 44.145581 0 85.626343 16.967764 116.9026 47.915425 31.505026 31.168111 48.808319 72.654419 48.694627 116.686308C806.431889 503.016984 789.128596 544.50052 757.737262 575.556326z"
												fill="#333333" p-id="2156"></path>
											<path
												d="M376.959445 365.141075C362.42773 363.478683 333.143847 368.802773 311.511958 390.433276c-17.411438 17.412825-28.059619 42.591334-28.389601 67.439861-0.221837 7.094627 5.545927 12.976083 12.640555 13.084229l0.221837 0c6.986482 0 12.754246-5.654073 12.97747-12.754246C309.184055 439.902946 317.057886 421.380936 329.819064 408.625303c15.413518-15.419064 36.708492-18.743847 44.144194-17.860659 6.986482 0.779203 13.529289-4.213518 14.309879-11.315078C389.046794 372.354939 384.054073 365.921664 376.959445 365.141075z"
												fill="#333333" p-id="2157"></path>
							`
						}
					]
				},
				{
					title: '在线音乐',
					data: [
						{
							title: '推荐',
							icon: `
											<path
												d="M512-0.001386c-282.770191 0-512.001386 229.231196-512.001386 512.001386S229.229809 1024.001386 512 1024.001386 1024.001386 794.770191 1024.001386 512 794.770191-0.001386 512-0.001386zM757.737262 575.556326 533.240901 792.734835c-6.097747 6.097747-14.530329 9.537608-23.402426 9.537608-8.876256 0-17.195147-3.438475-23.516118-9.6513L262.043674 575.556326C230.544194 544.386828 213.240901 503.016984 213.240901 458.870017c0-44.145581 17.303293-85.518198 48.694627-116.686308 31.276256-30.833969 72.762565-47.915425 116.908146-47.915425C420.324437 294.268284 460.148354 309.573657 490.980936 337.303293l18.857539 16.967764L528.805546 337.303293c30.724437-27.729636 70.542808-43.035009 112.029116-43.035009 44.145581 0 85.626343 16.967764 116.9026 47.915425 31.505026 31.168111 48.808319 72.654419 48.694627 116.686308C806.431889 503.016984 789.128596 544.50052 757.737262 575.556326z"
												fill="#333333" p-id="2156"></path>
											<path
												d="M376.959445 365.141075C362.42773 363.478683 333.143847 368.802773 311.511958 390.433276c-17.411438 17.412825-28.059619 42.591334-28.389601 67.439861-0.221837 7.094627 5.545927 12.976083 12.640555 13.084229l0.221837 0c6.986482 0 12.754246-5.654073 12.97747-12.754246C309.184055 439.902946 317.057886 421.380936 329.819064 408.625303c15.413518-15.419064 36.708492-18.743847 44.144194-17.860659 6.986482 0.779203 13.529289-4.213518 14.309879-11.315078C389.046794 372.354939 384.054073 365.921664 376.959445 365.141075z"
												fill="#333333" p-id="2157"></path>
							`
						},
						{
							title: '推荐',
							icon: `
											<path
												d="M512-0.001386c-282.770191 0-512.001386 229.231196-512.001386 512.001386S229.229809 1024.001386 512 1024.001386 1024.001386 794.770191 1024.001386 512 794.770191-0.001386 512-0.001386zM757.737262 575.556326 533.240901 792.734835c-6.097747 6.097747-14.530329 9.537608-23.402426 9.537608-8.876256 0-17.195147-3.438475-23.516118-9.6513L262.043674 575.556326C230.544194 544.386828 213.240901 503.016984 213.240901 458.870017c0-44.145581 17.303293-85.518198 48.694627-116.686308 31.276256-30.833969 72.762565-47.915425 116.908146-47.915425C420.324437 294.268284 460.148354 309.573657 490.980936 337.303293l18.857539 16.967764L528.805546 337.303293c30.724437-27.729636 70.542808-43.035009 112.029116-43.035009 44.145581 0 85.626343 16.967764 116.9026 47.915425 31.505026 31.168111 48.808319 72.654419 48.694627 116.686308C806.431889 503.016984 789.128596 544.50052 757.737262 575.556326z"
												fill="#333333" p-id="2156"></path>
											<path
												d="M376.959445 365.141075C362.42773 363.478683 333.143847 368.802773 311.511958 390.433276c-17.411438 17.412825-28.059619 42.591334-28.389601 67.439861-0.221837 7.094627 5.545927 12.976083 12.640555 13.084229l0.221837 0c6.986482 0 12.754246-5.654073 12.97747-12.754246C309.184055 439.902946 317.057886 421.380936 329.819064 408.625303c15.413518-15.419064 36.708492-18.743847 44.144194-17.860659 6.986482 0.779203 13.529289-4.213518 14.309879-11.315078C389.046794 372.354939 384.054073 365.921664 376.959445 365.141075z"
												fill="#333333" p-id="2157"></path>
							`
						},
						{
							title: '推荐',
							icon: `
											<path
												d="M512-0.001386c-282.770191 0-512.001386 229.231196-512.001386 512.001386S229.229809 1024.001386 512 1024.001386 1024.001386 794.770191 1024.001386 512 794.770191-0.001386 512-0.001386zM757.737262 575.556326 533.240901 792.734835c-6.097747 6.097747-14.530329 9.537608-23.402426 9.537608-8.876256 0-17.195147-3.438475-23.516118-9.6513L262.043674 575.556326C230.544194 544.386828 213.240901 503.016984 213.240901 458.870017c0-44.145581 17.303293-85.518198 48.694627-116.686308 31.276256-30.833969 72.762565-47.915425 116.908146-47.915425C420.324437 294.268284 460.148354 309.573657 490.980936 337.303293l18.857539 16.967764L528.805546 337.303293c30.724437-27.729636 70.542808-43.035009 112.029116-43.035009 44.145581 0 85.626343 16.967764 116.9026 47.915425 31.505026 31.168111 48.808319 72.654419 48.694627 116.686308C806.431889 503.016984 789.128596 544.50052 757.737262 575.556326z"
												fill="#333333" p-id="2156"></path>
											<path
												d="M376.959445 365.141075C362.42773 363.478683 333.143847 368.802773 311.511958 390.433276c-17.411438 17.412825-28.059619 42.591334-28.389601 67.439861-0.221837 7.094627 5.545927 12.976083 12.640555 13.084229l0.221837 0c6.986482 0 12.754246-5.654073 12.97747-12.754246C309.184055 439.902946 317.057886 421.380936 329.819064 408.625303c15.413518-15.419064 36.708492-18.743847 44.144194-17.860659 6.986482 0.779203 13.529289-4.213518 14.309879-11.315078C389.046794 372.354939 384.054073 365.921664 376.959445 365.141075z"
												fill="#333333" p-id="2157"></path>
							`
						}
					]
				}
			]
		}
	},
	methods: {
		nextSong() {
			music.nextSong();
		},
		previousSong() {
			music.previousSong();
		},
		//播放音乐
		play(i) {
			let data = {
				"input": "https://music.163.com/#/song?id=" + i.id,
				"filter": "url",
				"type": '_',
				"page": 1,
			}
			const formData = new FormData();
			Object.keys(data).map((key) => {
				formData.append(key, data[key])
			})
			// myHeaders.append("Hm_lpvt_50027a9c88cdde04a70f5272a88a10fa", "1587636659");
			fetch('https://music.liuzhijin.cn/', {
				method: 'post',
				headers: {
					"X-Requested-With": "XMLHttpRequest",
					"Hm_lpvt_50027a9c88cdde04a70f5272a88a10fa": "1587636659",
				},
				credentials: 'include',
				body: formData
			})
				.then((response) => response.json())
				.then((response) => {
					console.log(response)
					Music.play(response.data[0], {});
				})
		}
	},
	mounted() {
		// this.audio = new Audio();
		// // audios = new Audio();
		// this.music = new Music(this.audio);
		// this.music.start()
		console.log(window)
		console.log(this)
	}
}
</script>
<style>
@import url('./Home.css');
</style>
